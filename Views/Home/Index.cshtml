@{
    ViewData["Title"] = "Wallet";
}

<div class="row">
    
    <div id="spanStatus"></div>
  
    <div>
        <input type="text" id="textInput"/>
        <input type="button" id="btnSend" value="Send"/>
    </div>
    
</div>
<div>@ViewBag.Balance</div>

@section scripts
{
    <script>
        var webSocket;
        $().ready(function () {
            webSocket = new WebSocket("ws://localhost:9000");
            webSocket.onopen = function () {
                $("#spanStatus").text("connected");
            };
            webSocket.onmessage = function (evt) {
                $("#spanStatus").text(evt.data);
            };
            webSocket.onerror = function (evt) {
                alert(evt.message);
            };
            webSocket.onclose = function () {
                $("#spanStatus").text("disconnected");
            };
            $("#btnSend").click(function () {
                if (webSocket.readyState == WebSocket.OPEN) {
                    webSocket.send($("#textInput").val());
                }
                else {
                    $("#spanStatus").text("Connection is closed");
                }
            });
        });
    </script>
}
